<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Babylon.js Playground</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>

  <!-- Babylon globals (kept so window.BABYLON is available if your app expects it) -->
  <script src="https://assets.babylonjs.com/generated/Assets.js"></script>
  <script src="https://cdn.babylonjs.com/recast.js"></script>
  <script src="https://cdn.babylonjs.com/ammo.js"></script>
  <script src="https://cdn.babylonjs.com/havok/HavokPhysics_umd.js"></script>
  <script src="https://cdn.babylonjs.com/cannon.js"></script>
  <script src="https://cdn.babylonjs.com/Oimo.js"></script>
  <script src="https://cdn.babylonjs.com/earcut.min.js"></script>
  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
  <script src="https://cdn.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
  <script src="https://cdn.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
  <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.js"></script>
  <script src="https://cdn.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
  <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>
  <script src="https://cdn.babylonjs.com/addons/babylonjs.addons.min.js"></script>
  <script src="https://cdn.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>

  <style>
    html,body,#renderCanvas{width:100%;height:100%;margin:0;padding:0;overflow:hidden;background:#000}
  </style>
</head>
<body>
  <canvas id="renderCanvas"></canvas>
  <script type="module">
    // Turn bundle text into a module URL
    const code = "// snapshot:index.js\nvar createScene = function() {\n  var scene = new BABYLON.Scene(engine);\n  var camera = new BABYLON.FreeCamera(\"camera1\", new BABYLON.Vector3(0, 2, -5), scene);\n  camera.setTarget(BABYLON.Vector3.Zero());\n  camera.attachControl(canvas, true);\n  var light = new BABYLON.HemisphericLight(\"light\", new BABYLON.Vector3(0, 1, 0), scene);\n  light.intensity = 0.7;\n  var ground = BABYLON.MeshBuilder.CreateGround(\"ground\", { width: 6, height: 6 }, scene);\n  var sealModel = null;\n  var currentAnimation = null;\n  var animationGroups = {\n    confused: null,\n    angry: null,\n    walking: null\n  };\n  var modelUrl = \"https://github.com/annaaaddddd/annaaaddddd_ar_2025_assignment5/raw/main/seal.glb\";\n  BABYLON.SceneLoader.ImportMesh(\"\", \"\", modelUrl, scene, function(meshes, particleSystems, skeletons, animationGroups2) {\n    console.log(\"Seal model loaded!\");\n    console.log(\"Animation groups found:\", animationGroups2.length);\n    sealModel = meshes[0];\n    sealModel.position.y = 0;\n    sealModel.scaling = new BABYLON.Vector3(1, 1, 1);\n    animationGroups2.forEach(function(group) {\n      var name = group.name.toLowerCase();\n      console.log(\"Found animation:\", group.name);\n      if (name.includes(\"confused\")) {\n        animationGroups2.confused = group;\n      } else if (name.includes(\"angry\")) {\n        animationGroups2.angry = group;\n      } else if (name.includes(\"walk\")) {\n        animationGroups2.walking = group;\n      }\n      group.stop();\n    });\n    console.log(\"Animations mapped:\", animationGroups2);\n  });\n  window.playAnimation = function(animationName) {\n    if (!animationGroups[animationName]) {\n      console.warn(\"Animation not found:\", animationName);\n      return;\n    }\n    if (currentAnimation) {\n      currentAnimation.stop();\n    }\n    var anim = animationGroups[animationName];\n    anim.start(true);\n    currentAnimation = anim;\n    console.log(\"Playing animation:\", animationName);\n    if (document.getElementById(\"status\")) {\n      document.getElementById(\"status\").textContent = \"Current Action: \" + animationName.charAt(0).toUpperCase() + animationName.slice(1);\n    }\n  };\n  scene.onKeyboardObservable.add(function(kbInfo) {\n    switch (kbInfo.type) {\n      case BABYLON.KeyboardEventTypes.KEYDOWN:\n        switch (kbInfo.event.key) {\n          case \"1\":\n            window.playAnimation(\"confused\");\n            break;\n          case \"2\":\n            window.playAnimation(\"angry\");\n            break;\n          case \"3\":\n            window.playAnimation(\"walking\");\n            break;\n        }\n        break;\n    }\n  });\n  return scene;\n};\nexport {\n  createScene\n};\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic25hcHNob3Q6aW5kZXguanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCBjb25zdCBjcmVhdGVTY2VuZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBUaGlzIGNyZWF0ZXMgYSBiYXNpYyBCYWJ5bG9uIFNjZW5lIG9iamVjdCAobm9uLW1lc2gpXG4gICAgdmFyIHNjZW5lID0gbmV3IEJBQllMT04uU2NlbmUoZW5naW5lKTtcblxuICAgIC8vIFRoaXMgY3JlYXRlcyBhbmQgcG9zaXRpb25zIGEgZnJlZSBjYW1lcmEgKG5vbi1tZXNoKVxuICAgIHZhciBjYW1lcmEgPSBuZXcgQkFCWUxPTi5GcmVlQ2FtZXJhKFwiY2FtZXJhMVwiLCBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsIDIsIC01KSwgc2NlbmUpO1xuXG4gICAgLy8gVGhpcyB0YXJnZXRzIHRoZSBjYW1lcmEgdG8gc2NlbmUgb3JpZ2luXG4gICAgY2FtZXJhLnNldFRhcmdldChCQUJZTE9OLlZlY3RvcjMuWmVybygpKTtcblxuICAgIC8vIFRoaXMgYXR0YWNoZXMgdGhlIGNhbWVyYSB0byB0aGUgY2FudmFzXG4gICAgY2FtZXJhLmF0dGFjaENvbnRyb2woY2FudmFzLCB0cnVlKTtcblxuICAgIC8vIFRoaXMgY3JlYXRlcyBhIGxpZ2h0LCBhaW1pbmcgMCwxLDAgLSB0byB0aGUgc2t5IChub24tbWVzaClcbiAgICB2YXIgbGlnaHQgPSBuZXcgQkFCWUxPTi5IZW1pc3BoZXJpY0xpZ2h0KFwibGlnaHRcIiwgbmV3IEJBQllMT04uVmVjdG9yMygwLCAxLCAwKSwgc2NlbmUpO1xuXG4gICAgLy8gRGVmYXVsdCBpbnRlbnNpdHkgaXMgMS4gTGV0J3MgZGltIHRoZSBsaWdodCBhIHNtYWxsIGFtb3VudFxuICAgIGxpZ2h0LmludGVuc2l0eSA9IDAuNztcblxuICAgIC8vIE91ciBidWlsdC1pbiAnZ3JvdW5kJyBzaGFwZS5cbiAgICB2YXIgZ3JvdW5kID0gQkFCWUxPTi5NZXNoQnVpbGRlci5DcmVhdGVHcm91bmQoXCJncm91bmRcIiwge3dpZHRoOiA2LCBoZWlnaHQ6IDZ9LCBzY2VuZSk7XG5cbiAgICAvLyBWYXJpYWJsZXMgdG8gc3RvcmUgc2VhbCBtb2RlbCBhbmQgYW5pbWF0aW9uc1xuICAgIHZhciBzZWFsTW9kZWwgPSBudWxsO1xuICAgIHZhciBjdXJyZW50QW5pbWF0aW9uID0gbnVsbDtcbiAgICB2YXIgYW5pbWF0aW9uR3JvdXBzID0ge1xuICAgICAgICBjb25mdXNlZDogbnVsbCxcbiAgICAgICAgYW5ncnk6IG51bGwsXG4gICAgICAgIHdhbGtpbmc6IG51bGxcbiAgICB9O1xuXG4gICAgLy8gTG9hZCB0aGUgc2VhbCBtb2RlbCB3aXRoIGFuaW1hdGlvbnMgZnJvbSBHaXRIdWJcbiAgICB2YXIgbW9kZWxVcmwgPSBcImh0dHBzOi8vZ2l0aHViLmNvbS9hbm5hYWFkZGRkZC9hbm5hYWFkZGRkZF9hcl8yMDI1X2Fzc2lnbm1lbnQ1L3Jhdy9tYWluL3NlYWwuZ2xiXCI7XG4gICAgXG4gICAgQkFCWUxPTi5TY2VuZUxvYWRlci5JbXBvcnRNZXNoKFwiXCIsIFwiXCIsIG1vZGVsVXJsLCBzY2VuZSwgZnVuY3Rpb24obWVzaGVzLCBwYXJ0aWNsZVN5c3RlbXMsIHNrZWxldG9ucywgYW5pbWF0aW9uR3JvdXBzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2VhbCBtb2RlbCBsb2FkZWQhXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkFuaW1hdGlvbiBncm91cHMgZm91bmQ6XCIsIGFuaW1hdGlvbkdyb3Vwcy5sZW5ndGgpO1xuICAgICAgICBcbiAgICAgICAgLy8gU3RvcmUgdGhlIHNlYWwgbW9kZWwgKHJvb3QgbWVzaClcbiAgICAgICAgc2VhbE1vZGVsID0gbWVzaGVzWzBdO1xuICAgICAgICBzZWFsTW9kZWwucG9zaXRpb24ueSA9IDA7XG4gICAgICAgIHNlYWxNb2RlbC5zY2FsaW5nID0gbmV3IEJBQllMT04uVmVjdG9yMygxLCAxLCAxKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcCBhbmltYXRpb24gZ3JvdXBzIGJ5IG5hbWVcbiAgICAgICAgYW5pbWF0aW9uR3JvdXBzLmZvckVhY2goZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gZ3JvdXAubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGb3VuZCBhbmltYXRpb246XCIsIGdyb3VwLm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmFtZS5pbmNsdWRlcyhcImNvbmZ1c2VkXCIpKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uR3JvdXBzLmNvbmZ1c2VkID0gZ3JvdXA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5hbWUuaW5jbHVkZXMoXCJhbmdyeVwiKSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkdyb3Vwcy5hbmdyeSA9IGdyb3VwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lLmluY2x1ZGVzKFwid2Fsa1wiKSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkdyb3Vwcy53YWxraW5nID0gZ3JvdXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFN0b3AgYWxsIGFuaW1hdGlvbnMgaW5pdGlhbGx5XG4gICAgICAgICAgICBncm91cC5zdG9wKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJBbmltYXRpb25zIG1hcHBlZDpcIiwgYW5pbWF0aW9uR3JvdXBzKTtcbiAgICB9KTtcblxuICAgIC8vIEZ1bmN0aW9uIHRvIHBsYXkgYW4gYW5pbWF0aW9uXG4gICAgd2luZG93LnBsYXlBbmltYXRpb24gPSBmdW5jdGlvbihhbmltYXRpb25OYW1lKSB7XG4gICAgICAgIGlmICghYW5pbWF0aW9uR3JvdXBzW2FuaW1hdGlvbk5hbWVdKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBbmltYXRpb24gbm90IGZvdW5kOlwiLCBhbmltYXRpb25OYW1lKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU3RvcCBjdXJyZW50IGFuaW1hdGlvbiBpZiBwbGF5aW5nXG4gICAgICAgIGlmIChjdXJyZW50QW5pbWF0aW9uKSB7XG4gICAgICAgICAgICBjdXJyZW50QW5pbWF0aW9uLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gUGxheSB0aGUgbmV3IGFuaW1hdGlvbiAobG9vcGluZylcbiAgICAgICAgdmFyIGFuaW0gPSBhbmltYXRpb25Hcm91cHNbYW5pbWF0aW9uTmFtZV07XG4gICAgICAgIGFuaW0uc3RhcnQodHJ1ZSk7IC8vIHRydWUgPSBsb29wXG4gICAgICAgIGN1cnJlbnRBbmltYXRpb24gPSBhbmltO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJQbGF5aW5nIGFuaW1hdGlvbjpcIiwgYW5pbWF0aW9uTmFtZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgVUkgc3RhdHVzIChpZiB5b3UgaGF2ZSBhIHN0YXR1cyBlbGVtZW50KVxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGF0dXNcIikpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhdHVzXCIpLnRleHRDb250ZW50ID0gXCJDdXJyZW50IEFjdGlvbjogXCIgKyBhbmltYXRpb25OYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgYW5pbWF0aW9uTmFtZS5zbGljZSgxKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBBZGQga2V5Ym9hcmQgY29udHJvbHMgZm9yIGVhc3kgdGVzdGluZ1xuICAgIHNjZW5lLm9uS2V5Ym9hcmRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbihrYkluZm8pIHtcbiAgICAgICAgc3dpdGNoIChrYkluZm8udHlwZSkge1xuICAgICAgICAgICAgY2FzZSBCQUJZTE9OLktleWJvYXJkRXZlbnRUeXBlcy5LRVlET1dOOlxuICAgICAgICAgICAgICAgIHN3aXRjaChrYkluZm8uZXZlbnQua2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIxXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGxheUFuaW1hdGlvbihcImNvbmZ1c2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGxheUFuaW1hdGlvbihcImFuZ3J5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGxheUFuaW1hdGlvbihcIndhbGtpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBzY2VuZTtcbn07XG4vLyMgc291cmNlVVJMPWZpbGU6Ly8vcGcvaW5kZXguanMiXSwKICAibWFwcGluZ3MiOiAiO0FBQU8sSUFBTSxjQUFjLFdBQVk7QUFFbkMsTUFBSSxRQUFRLElBQUksUUFBUSxNQUFNLE1BQU07QUFHcEMsTUFBSSxTQUFTLElBQUksUUFBUSxXQUFXLFdBQVcsSUFBSSxRQUFRLFFBQVEsR0FBRyxHQUFHLEVBQUUsR0FBRyxLQUFLO0FBR25GLFNBQU8sVUFBVSxRQUFRLFFBQVEsS0FBSyxDQUFDO0FBR3ZDLFNBQU8sY0FBYyxRQUFRLElBQUk7QUFHakMsTUFBSSxRQUFRLElBQUksUUFBUSxpQkFBaUIsU0FBUyxJQUFJLFFBQVEsUUFBUSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEtBQUs7QUFHckYsUUFBTSxZQUFZO0FBR2xCLE1BQUksU0FBUyxRQUFRLFlBQVksYUFBYSxVQUFVLEVBQUMsT0FBTyxHQUFHLFFBQVEsRUFBQyxHQUFHLEtBQUs7QUFHcEYsTUFBSSxZQUFZO0FBQ2hCLE1BQUksbUJBQW1CO0FBQ3ZCLE1BQUksa0JBQWtCO0FBQUEsSUFDbEIsVUFBVTtBQUFBLElBQ1YsT0FBTztBQUFBLElBQ1AsU0FBUztBQUFBLEVBQ2I7QUFHQSxNQUFJLFdBQVc7QUFFZixVQUFRLFlBQVksV0FBVyxJQUFJLElBQUksVUFBVSxPQUFPLFNBQVMsUUFBUSxpQkFBaUIsV0FBV0Esa0JBQWlCO0FBQ2xILFlBQVEsSUFBSSxvQkFBb0I7QUFDaEMsWUFBUSxJQUFJLDJCQUEyQkEsaUJBQWdCLE1BQU07QUFHN0QsZ0JBQVksT0FBTyxDQUFDO0FBQ3BCLGNBQVUsU0FBUyxJQUFJO0FBQ3ZCLGNBQVUsVUFBVSxJQUFJLFFBQVEsUUFBUSxHQUFHLEdBQUcsQ0FBQztBQUcvQyxJQUFBQSxpQkFBZ0IsUUFBUSxTQUFTLE9BQU87QUFDcEMsVUFBSSxPQUFPLE1BQU0sS0FBSyxZQUFZO0FBQ2xDLGNBQVEsSUFBSSxvQkFBb0IsTUFBTSxJQUFJO0FBRTFDLFVBQUksS0FBSyxTQUFTLFVBQVUsR0FBRztBQUMzQixRQUFBQSxpQkFBZ0IsV0FBVztBQUFBLE1BQy9CLFdBQVcsS0FBSyxTQUFTLE9BQU8sR0FBRztBQUMvQixRQUFBQSxpQkFBZ0IsUUFBUTtBQUFBLE1BQzVCLFdBQVcsS0FBSyxTQUFTLE1BQU0sR0FBRztBQUM5QixRQUFBQSxpQkFBZ0IsVUFBVTtBQUFBLE1BQzlCO0FBR0EsWUFBTSxLQUFLO0FBQUEsSUFDZixDQUFDO0FBRUQsWUFBUSxJQUFJLHNCQUFzQkEsZ0JBQWU7QUFBQSxFQUNyRCxDQUFDO0FBR0QsU0FBTyxnQkFBZ0IsU0FBUyxlQUFlO0FBQzNDLFFBQUksQ0FBQyxnQkFBZ0IsYUFBYSxHQUFHO0FBQ2pDLGNBQVEsS0FBSyx3QkFBd0IsYUFBYTtBQUNsRDtBQUFBLElBQ0o7QUFHQSxRQUFJLGtCQUFrQjtBQUNsQix1QkFBaUIsS0FBSztBQUFBLElBQzFCO0FBR0EsUUFBSSxPQUFPLGdCQUFnQixhQUFhO0FBQ3hDLFNBQUssTUFBTSxJQUFJO0FBQ2YsdUJBQW1CO0FBRW5CLFlBQVEsSUFBSSxzQkFBc0IsYUFBYTtBQUcvQyxRQUFJLFNBQVMsZUFBZSxRQUFRLEdBQUc7QUFDbkMsZUFBUyxlQUFlLFFBQVEsRUFBRSxjQUFjLHFCQUFxQixjQUFjLE9BQU8sQ0FBQyxFQUFFLFlBQVksSUFBSSxjQUFjLE1BQU0sQ0FBQztBQUFBLElBQ3RJO0FBQUEsRUFDSjtBQUdBLFFBQU0scUJBQXFCLElBQUksU0FBUyxRQUFRO0FBQzVDLFlBQVEsT0FBTyxNQUFNO0FBQUEsTUFDakIsS0FBSyxRQUFRLG1CQUFtQjtBQUM1QixnQkFBTyxPQUFPLE1BQU0sS0FBSztBQUFBLFVBQ3JCLEtBQUs7QUFDRCxtQkFBTyxjQUFjLFVBQVU7QUFDL0I7QUFBQSxVQUNKLEtBQUs7QUFDRCxtQkFBTyxjQUFjLE9BQU87QUFDNUI7QUFBQSxVQUNKLEtBQUs7QUFDRCxtQkFBTyxjQUFjLFNBQVM7QUFDOUI7QUFBQSxRQUNSO0FBQ0E7QUFBQSxJQUNSO0FBQUEsRUFDSixDQUFDO0FBRUQsU0FBTztBQUNYOyIsCiAgIm5hbWVzIjogWyJhbmltYXRpb25Hcm91cHMiXQp9Cg==\n";
    const blob = new Blob([code], { type: 'text/javascript' });
    const url = URL.createObjectURL(blob);

    const BABYLON = window.BABYLON;
    const canvas = document.getElementById('renderCanvas');

    // Import your bundled app (which exports createScene / default)
    const mod = await import(url);

    let engine = null;
    if (typeof mod.createEngine === 'function') {
      try { engine = await mod.createEngine(); } catch {}
    }
    if (!engine) {
      engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true });
    }
    window.engine = engine; window.canvas = canvas;

    let createScene = mod.createScene || mod.default;
    if (!createScene && mod.Playground?.CreateScene) createScene = (e,c)=>mod.Playground.CreateScene(e,c);
    if (!createScene) throw new Error('No createScene() export found.');

    const scene = await (createScene(engine, canvas) ?? createScene());
    engine.runRenderLoop(()=>scene.render());
    addEventListener('resize', ()=>engine.resize());

    addEventListener('unload', ()=> URL.revokeObjectURL(url));
  </script>
</body>
</html>