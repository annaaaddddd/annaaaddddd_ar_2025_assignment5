<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Babylon.js Playground</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>

  <!-- Babylon globals (kept so window.BABYLON is available if your app expects it) -->
  <script src="https://assets.babylonjs.com/generated/Assets.js"></script>
  <script src="https://cdn.babylonjs.com/recast.js"></script>
  <script src="https://cdn.babylonjs.com/ammo.js"></script>
  <script src="https://cdn.babylonjs.com/havok/HavokPhysics_umd.js"></script>
  <script src="https://cdn.babylonjs.com/cannon.js"></script>
  <script src="https://cdn.babylonjs.com/Oimo.js"></script>
  <script src="https://cdn.babylonjs.com/earcut.min.js"></script>
  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
  <script src="https://cdn.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
  <script src="https://cdn.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
  <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.js"></script>
  <script src="https://cdn.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
  <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>
  <script src="https://cdn.babylonjs.com/addons/babylonjs.addons.min.js"></script>
  <script src="https://cdn.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>

  <style>
    html,body,#renderCanvas{width:100%;height:100%;margin:0;padding:0;overflow:hidden;background:#000}
  </style>
</head>
<body>
  <canvas id="renderCanvas"></canvas>
  <script type="module">
    // Turn bundle text into a module URL
    const code = "// snapshot:index.js\nvar createScene = function() {\n  var scene = new BABYLON.Scene(engine);\n  var camera = new BABYLON.FreeCamera(\"camera1\", new BABYLON.Vector3(0, 2, -6), scene);\n  camera.setTarget(BABYLON.Vector3.Zero());\n  camera.attachControl(canvas, true);\n  var light = new BABYLON.HemisphericLight(\"light\", new BABYLON.Vector3(0, 1, 0), scene);\n  light.intensity = 0.8;\n  var ground = BABYLON.MeshBuilder.CreateGround(\"ground\", { width: 8, height: 8 }, scene);\n  var sealModel = null;\n  var currentAnimation = null;\n  var animationGroups = {\n    walking: null,\n    angry: null,\n    confused: null\n  };\n  BABYLON.SceneLoader.Append(\n    \"https://cdn.jsdelivr.net/gh/annaaaddddd/annaaaddddd_ar_2025_assignment5/walking/\",\n    \"seal.glb\",\n    scene,\n    function(scene2) {\n      console.log(\"Seal model loaded!\");\n      console.log(\"Animation groups found:\", scene2.animationGroups.length);\n      sealModel = scene2.meshes[scene2.meshes.length - 1];\n      sealModel.scaling = new BABYLON.Vector3(1, 1, 1);\n      sealModel.position.y = 0.5;\n      sealModel.rotation.x = -Math.PI / 2;\n      scene2.animationGroups.forEach(function(group) {\n        const name = group.name.toLowerCase();\n        console.log(\"Found animation:\", group.name);\n        if (name.includes(\"walk\")) animationGroups.walking = group;\n        else if (name.includes(\"angry\")) animationGroups.angry = group;\n        else if (name.includes(\"armature\")) animationGroups.confused = group;\n        group.stop();\n      });\n      console.log(\"Animations mapped:\", animationGroups);\n    }\n  );\n  window.playAnimation = function(animationName) {\n    if (!animationGroups[animationName]) {\n      console.warn(\"Animation not found:\", animationName);\n      return;\n    }\n    if (currentAnimation) {\n      currentAnimation.stop();\n      currentAnimation.reset();\n    }\n    currentAnimation = animationGroups[animationName];\n    currentAnimation.start(true);\n    console.log(\"Playing animation:\", animationName);\n    if (document.getElementById(\"status\")) {\n      document.getElementById(\"status\").textContent = \"Current Action: \" + animationName.charAt(0).toUpperCase() + animationName.slice(1);\n    }\n  };\n  scene.onKeyboardObservable.add(function(kbInfo) {\n    if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\n      switch (kbInfo.event.key) {\n        case \"1\":\n          playAnimation(\"confused\");\n          break;\n        case \"2\":\n          playAnimation(\"angry\");\n          break;\n        case \"3\":\n          playAnimation(\"walking\");\n          break;\n      }\n    }\n  });\n  return scene;\n};\nexport {\n  createScene\n};\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic25hcHNob3Q6aW5kZXguanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCBjb25zdCBjcmVhdGVTY2VuZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBzY2VuZSA9IG5ldyBCQUJZTE9OLlNjZW5lKGVuZ2luZSk7XG5cbiAgICB2YXIgY2FtZXJhID0gbmV3IEJBQllMT04uRnJlZUNhbWVyYShcImNhbWVyYTFcIiwgbmV3IEJBQllMT04uVmVjdG9yMygwLCAyLCAtNiksIHNjZW5lKTtcbiAgICBjYW1lcmEuc2V0VGFyZ2V0KEJBQllMT04uVmVjdG9yMy5aZXJvKCkpO1xuICAgIGNhbWVyYS5hdHRhY2hDb250cm9sKGNhbnZhcywgdHJ1ZSk7XG5cbiAgICB2YXIgbGlnaHQgPSBuZXcgQkFCWUxPTi5IZW1pc3BoZXJpY0xpZ2h0KFwibGlnaHRcIiwgbmV3IEJBQllMT04uVmVjdG9yMygwLCAxLCAwKSwgc2NlbmUpO1xuICAgIGxpZ2h0LmludGVuc2l0eSA9IDAuODtcblxuICAgIHZhciBncm91bmQgPSBCQUJZTE9OLk1lc2hCdWlsZGVyLkNyZWF0ZUdyb3VuZChcImdyb3VuZFwiLCB7IHdpZHRoOiA4LCBoZWlnaHQ6IDggfSwgc2NlbmUpO1xuXG4gICAgdmFyIHNlYWxNb2RlbCA9IG51bGw7XG4gICAgdmFyIGN1cnJlbnRBbmltYXRpb24gPSBudWxsO1xuICAgIHZhciBhbmltYXRpb25Hcm91cHMgPSB7XG4gICAgICAgIHdhbGtpbmc6IG51bGwsXG4gICAgICAgIGFuZ3J5OiBudWxsLFxuICAgICAgICBjb25mdXNlZDogbnVsbFxuICAgIH07XG5cbiAgICBCQUJZTE9OLlNjZW5lTG9hZGVyLkFwcGVuZChcbiAgICAgICAgXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvYW5uYWFhZGRkZGQvYW5uYWFhZGRkZGRfYXJfMjAyNV9hc3NpZ25tZW50NS93YWxraW5nL1wiLFxuICAgICAgICBcInNlYWwuZ2xiXCIsXG4gICAgICAgIHNjZW5lLFxuICAgICAgICBmdW5jdGlvbiAoc2NlbmUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VhbCBtb2RlbCBsb2FkZWQhXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBbmltYXRpb24gZ3JvdXBzIGZvdW5kOlwiLCBzY2VuZS5hbmltYXRpb25Hcm91cHMubGVuZ3RoKTtcblxuICAgICAgICAgICAgc2VhbE1vZGVsID0gc2NlbmUubWVzaGVzW3NjZW5lLm1lc2hlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHNlYWxNb2RlbC5zY2FsaW5nID0gbmV3IEJBQllMT04uVmVjdG9yMygxLCAxLCAxKTtcbiAgICAgICAgICAgIHNlYWxNb2RlbC5wb3NpdGlvbi55ID0gMC41OyBcbiAgICAgICAgICAgIHNlYWxNb2RlbC5yb3RhdGlvbi54ID0gLSBNYXRoLlBJIC8gMjtcblxuICAgICAgICAgICAgc2NlbmUuYW5pbWF0aW9uR3JvdXBzLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGdyb3VwLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZvdW5kIGFuaW1hdGlvbjpcIiwgZ3JvdXAubmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoXCJ3YWxrXCIpKSBhbmltYXRpb25Hcm91cHMud2Fsa2luZyA9IGdyb3VwO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5hbWUuaW5jbHVkZXMoXCJhbmdyeVwiKSkgYW5pbWF0aW9uR3JvdXBzLmFuZ3J5ID0gZ3JvdXA7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobmFtZS5pbmNsdWRlcyhcImFybWF0dXJlXCIpKSBhbmltYXRpb25Hcm91cHMuY29uZnVzZWQgPSBncm91cDsgLy8gXHU5RUQ4XHU4QkE0XHU1MkE4XHU0RjVDXG4gICAgICAgICAgICAgICAgZ3JvdXAuc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5pbWF0aW9ucyBtYXBwZWQ6XCIsIGFuaW1hdGlvbkdyb3Vwcyk7XG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgd2luZG93LnBsYXlBbmltYXRpb24gPSBmdW5jdGlvbiAoYW5pbWF0aW9uTmFtZSkge1xuICAgICAgICBpZiAoIWFuaW1hdGlvbkdyb3Vwc1thbmltYXRpb25OYW1lXSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQW5pbWF0aW9uIG5vdCBmb3VuZDpcIiwgYW5pbWF0aW9uTmFtZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VycmVudEFuaW1hdGlvbikge1xuICAgICAgICAgICAgY3VycmVudEFuaW1hdGlvbi5zdG9wKCk7XG4gICAgICAgICAgICBjdXJyZW50QW5pbWF0aW9uLnJlc2V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50QW5pbWF0aW9uID0gYW5pbWF0aW9uR3JvdXBzW2FuaW1hdGlvbk5hbWVdO1xuICAgICAgICBjdXJyZW50QW5pbWF0aW9uLnN0YXJ0KHRydWUpOyBcbiAgICAgICAgY29uc29sZS5sb2coXCJQbGF5aW5nIGFuaW1hdGlvbjpcIiwgYW5pbWF0aW9uTmFtZSk7XG5cbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhdHVzXCIpKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXR1c1wiKS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgXCJDdXJyZW50IEFjdGlvbjogXCIgK1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbk5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbk5hbWUuc2xpY2UoMSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gaG90IGtleVxuICAgIHNjZW5lLm9uS2V5Ym9hcmRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbiAoa2JJbmZvKSB7XG4gICAgICAgIGlmIChrYkluZm8udHlwZSA9PT0gQkFCWUxPTi5LZXlib2FyZEV2ZW50VHlwZXMuS0VZRE9XTikge1xuICAgICAgICAgICAgc3dpdGNoIChrYkluZm8uZXZlbnQua2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIjFcIjpcbiAgICAgICAgICAgICAgICAgICAgcGxheUFuaW1hdGlvbihcImNvbmZ1c2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiMlwiOlxuICAgICAgICAgICAgICAgICAgICBwbGF5QW5pbWF0aW9uKFwiYW5ncnlcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCIzXCI6XG4gICAgICAgICAgICAgICAgICAgIHBsYXlBbmltYXRpb24oXCJ3YWxraW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNjZW5lO1xufTtcblxuLy8jIHNvdXJjZVVSTD1maWxlOi8vL3BnL2luZGV4LmpzIl0sCiAgIm1hcHBpbmdzIjogIjtBQUFPLElBQU0sY0FBYyxXQUFZO0FBRW5DLE1BQUksUUFBUSxJQUFJLFFBQVEsTUFBTSxNQUFNO0FBRXBDLE1BQUksU0FBUyxJQUFJLFFBQVEsV0FBVyxXQUFXLElBQUksUUFBUSxRQUFRLEdBQUcsR0FBRyxFQUFFLEdBQUcsS0FBSztBQUNuRixTQUFPLFVBQVUsUUFBUSxRQUFRLEtBQUssQ0FBQztBQUN2QyxTQUFPLGNBQWMsUUFBUSxJQUFJO0FBRWpDLE1BQUksUUFBUSxJQUFJLFFBQVEsaUJBQWlCLFNBQVMsSUFBSSxRQUFRLFFBQVEsR0FBRyxHQUFHLENBQUMsR0FBRyxLQUFLO0FBQ3JGLFFBQU0sWUFBWTtBQUVsQixNQUFJLFNBQVMsUUFBUSxZQUFZLGFBQWEsVUFBVSxFQUFFLE9BQU8sR0FBRyxRQUFRLEVBQUUsR0FBRyxLQUFLO0FBRXRGLE1BQUksWUFBWTtBQUNoQixNQUFJLG1CQUFtQjtBQUN2QixNQUFJLGtCQUFrQjtBQUFBLElBQ2xCLFNBQVM7QUFBQSxJQUNULE9BQU87QUFBQSxJQUNQLFVBQVU7QUFBQSxFQUNkO0FBRUEsVUFBUSxZQUFZO0FBQUEsSUFDaEI7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0EsU0FBVUEsUUFBTztBQUNiLGNBQVEsSUFBSSxvQkFBb0I7QUFDaEMsY0FBUSxJQUFJLDJCQUEyQkEsT0FBTSxnQkFBZ0IsTUFBTTtBQUVuRSxrQkFBWUEsT0FBTSxPQUFPQSxPQUFNLE9BQU8sU0FBUyxDQUFDO0FBQ2hELGdCQUFVLFVBQVUsSUFBSSxRQUFRLFFBQVEsR0FBRyxHQUFHLENBQUM7QUFDL0MsZ0JBQVUsU0FBUyxJQUFJO0FBQ3ZCLGdCQUFVLFNBQVMsSUFBSSxDQUFFLEtBQUssS0FBSztBQUVuQyxNQUFBQSxPQUFNLGdCQUFnQixRQUFRLFNBQVUsT0FBTztBQUMzQyxjQUFNLE9BQU8sTUFBTSxLQUFLLFlBQVk7QUFDcEMsZ0JBQVEsSUFBSSxvQkFBb0IsTUFBTSxJQUFJO0FBQzFDLFlBQUksS0FBSyxTQUFTLE1BQU0sRUFBRyxpQkFBZ0IsVUFBVTtBQUFBLGlCQUM1QyxLQUFLLFNBQVMsT0FBTyxFQUFHLGlCQUFnQixRQUFRO0FBQUEsaUJBQ2hELEtBQUssU0FBUyxVQUFVLEVBQUcsaUJBQWdCLFdBQVc7QUFDL0QsY0FBTSxLQUFLO0FBQUEsTUFDZixDQUFDO0FBRUQsY0FBUSxJQUFJLHNCQUFzQixlQUFlO0FBQUEsSUFDckQ7QUFBQSxFQUNKO0FBRUEsU0FBTyxnQkFBZ0IsU0FBVSxlQUFlO0FBQzVDLFFBQUksQ0FBQyxnQkFBZ0IsYUFBYSxHQUFHO0FBQ2pDLGNBQVEsS0FBSyx3QkFBd0IsYUFBYTtBQUNsRDtBQUFBLElBQ0o7QUFFQSxRQUFJLGtCQUFrQjtBQUNsQix1QkFBaUIsS0FBSztBQUN0Qix1QkFBaUIsTUFBTTtBQUFBLElBQzNCO0FBRUEsdUJBQW1CLGdCQUFnQixhQUFhO0FBQ2hELHFCQUFpQixNQUFNLElBQUk7QUFDM0IsWUFBUSxJQUFJLHNCQUFzQixhQUFhO0FBRS9DLFFBQUksU0FBUyxlQUFlLFFBQVEsR0FBRztBQUNuQyxlQUFTLGVBQWUsUUFBUSxFQUFFLGNBQzlCLHFCQUNBLGNBQWMsT0FBTyxDQUFDLEVBQUUsWUFBWSxJQUNwQyxjQUFjLE1BQU0sQ0FBQztBQUFBLElBQzdCO0FBQUEsRUFDSjtBQUdBLFFBQU0scUJBQXFCLElBQUksU0FBVSxRQUFRO0FBQzdDLFFBQUksT0FBTyxTQUFTLFFBQVEsbUJBQW1CLFNBQVM7QUFDcEQsY0FBUSxPQUFPLE1BQU0sS0FBSztBQUFBLFFBQ3RCLEtBQUs7QUFDRCx3QkFBYyxVQUFVO0FBQ3hCO0FBQUEsUUFDSixLQUFLO0FBQ0Qsd0JBQWMsT0FBTztBQUNyQjtBQUFBLFFBQ0osS0FBSztBQUNELHdCQUFjLFNBQVM7QUFDdkI7QUFBQSxNQUNSO0FBQUEsSUFDSjtBQUFBLEVBQ0osQ0FBQztBQUVELFNBQU87QUFDWDsiLAogICJuYW1lcyI6IFsic2NlbmUiXQp9Cg==\n";
    const blob = new Blob([code], { type: 'text/javascript' });
    const url = URL.createObjectURL(blob);

    const BABYLON = window.BABYLON;
    const canvas = document.getElementById('renderCanvas');

    // Import your bundled app (which exports createScene / default)
    const mod = await import(url);

    let engine = null;
    if (typeof mod.createEngine === 'function') {
      try { engine = await mod.createEngine(); } catch {}
    }
    if (!engine) {
      engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true });
    }
    window.engine = engine; window.canvas = canvas;

    let createScene = mod.createScene || mod.default;
    if (!createScene && mod.Playground?.CreateScene) createScene = (e,c)=>mod.Playground.CreateScene(e,c);
    if (!createScene) throw new Error('No createScene() export found.');

    const scene = await (createScene(engine, canvas) ?? createScene());
    engine.runRenderLoop(()=>scene.render());
    addEventListener('resize', ()=>engine.resize());

    addEventListener('unload', ()=> URL.revokeObjectURL(url));
  </script>
</body>
</html>